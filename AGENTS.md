# Repository Guidelines

## Project Structure & Module Organization

- `src/`: TypeScript source for the Obsidian plugin.
  - `src/main.ts`: plugin entry point (registers command, loads/saves settings).
  - `src/tag-collector.ts`, `src/formatter.ts`, `src/file-writer.ts`, `src/settings.ts`: small single-responsibility modules.
- `main.js`: bundled plugin output (generated by esbuild). Do not edit by hand.
- `manifest.json`, `styles.css`: release artifacts consumed by Obsidian.
- Tooling/config: `esbuild.config.mjs`, `eslint.config.mts`, `tsconfig.json`, `version-bump.mjs`.
- CI: `.github/workflows/lint.yml` runs build + lint on Node 20/22.

## Build, Test, and Development Commands

```bash
npm install        # install deps (local dev)
npm ci             # clean install (matches CI)
npm run dev        # watch + rebuild to ./main.js (reload Obsidian to pick up changes)
npm run build      # typecheck (tsc) + production bundle via esbuild
npm run lint       # run ESLint on the repo
npm run version    # bump manifest/versions for a release and stage the files
```

## Coding Style & Naming Conventions

- Indentation: tabs, width 4 (see `.editorconfig`).
- Language: TypeScript with strictness enabled (see `tsconfig.json`). Prefer `async/await` and explicit error handling around Obsidian APIs.
- Naming:
  - Files: `kebab-case.ts` (matches existing `tag-collector.ts`, `file-writer.ts`).
  - Types/classes: `PascalCase`; functions/vars: `camelCase`.

## Testing Guidelines

- No automated test suite is currently configured.
- Manual check (required for behavior changes):
  1) `npm run dev`
  2) In Obsidian: reload the plugin (or restart Obsidian)
  3) Run command palette: "Update tag index"
  4) Verify the configured output file (default: `Tags.md`) updates as expected

## Commit & Pull Request Guidelines

- Commit messages: the history is small and not strictly Conventional Commits; keep messages short and imperative (e.g., `Fix tag sorting`, `Add settings validation`).
- PRs should include: what/why, steps to verify in Obsidian, and screenshots/gifs if UI/settings changed.
- Before opening a PR: run `npm run build` and `npm run lint`, and avoid committing generated `main.js` changes unless you are preparing a release.
